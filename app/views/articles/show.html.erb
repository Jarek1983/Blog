<h1>Artykuły</h1>

<p><strong>Title:</strong>

    <%= @article.title %>

</p>

<p><strong>Time: </strong>

  <%= @article.created_at.strftime('%A %-B %-d, %Y | %l:%M %p') %>

</p>

<p><strong>Text: </strong>

    <%= @article.text %>

</p>

<p>

  <label>Image</label>
  <%= image_tag(@article.image_url) if @article.image?%>
  
</p>

<% if sponsored_article? @article %>

  <h3>Artykuł sponsorowany przez firmę <%= @article.company.name %></h3>

<% end %>

<p><strong>Text: </strong>

    <%= @article.user.email %>

</p>

<p><strong class="badge badge-primary">Tags: </strong>

    <%= @article.tags %>
    
</p>

<%= pluralize(@article.likes_count, 'person')%> liked this article

<% if @like.persisted? %>

  <i class="fa fa-thumbs-down"></i>

  <%= link_to "Unlike", article_like_path(@article, @like), method: :delete %>

<% else %>

  <i class="fa fa-thumbs-up"></i>

  <%= link_to "Like", article_likes_path(@article), method: :post %>

<% end %>

<% if sponsored_article? @article %>
  
  <p>Komentarze zablokowane</p>
  
<% else %>

  <h2>Comments</h2>

    <button onclick="show_hide()">Click</button>
  
    <div id="hide">

      <%= render @article.comments.includes(:user) %>

      <%= render '/comments/form' %>

<% end %>

  <div>

      <%= link_to 'Back', articles_path %>

    <% if @article.user == current_user && current_user&.admin? %> 

      <%= link_to 'Edit', edit_article_path(@article) %>

    <% end %>


    <% if @article.user == current_user && current_user&.admin? %> 

      <%= link_to 'Delete', article_path(@article), method: :delete, 
                data: {confirm: 'Are you sure?'} %>

    <% end %>

    <% if current_user&.admin? %>

      <%= link_to @article.published? ? "Unpublish" : "Publish", toggle_visibility_article_path(@article) %>

    <% end %>

  </div>

